!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):window.Lscroll=e()}(this,function(){function t(){}function e(t,e){return t.className.match(new RegExp("(\\s|^)("+e+")(\\s|$)"))}function s(t,s){e(t,s)||(t.className+=" "+s)}function i(t,s){if(e(t,s)){var i=t.className.split(/\s+/);i.splice(i.indexOf(s),1),t.className=i.join(" ")}}function h(t,e,s,i){t.addEventListener(e,s,i)}function o(t,e,s){t.removeEventListener(e,s)}var r=null;!function(){var t=document.createElement("fakeElement");[["WebkitTransform","webkitTransform","webkit"],["transform","Transform",null],["MozTransform","transform","moz"],["OTransform","oTransform","o"]].some(function(e){if(void 0!==t.style[e[0]])return r=e[1],!0})}();var l=window.navigator.userAgent,a=l.indexOf("Firefox")>-1?0:1,n=function(e){function h(t){return"string"==typeof t?document.querySelector(t):t&&1===t.nodeType?t:void 0}if(this.wrapper=h(e.wrapper),this.slider=h(e.slider),this.scrollbar=h(e.scrollbar),!this.scrollbar)throw new Error("No wrapper");if(!this.scrollbar)throw new Error("No scrollbar");if(!this.slider)throw new Error("No slider");this.preWheelPixels=e.preWheelPixels||20,this.thumb=this.scrollbar.firstElementChild,this.onMoving=!1,this.startY=0,this.moveY=0,this.moveYLasttime=0,this.wheelY=0,this.timeout=null,this.wrapperHeight=this.wrapper.offsetHeight,this.scrollbarHide=!!e.scrollbarHide,this.scrollbarHide?this._showScrollbar=function(){window.clearTimeout(this.timeout),s(this.scrollbar,"active");var t=this;this.timeout=setTimeout(function(){i(t.scrollbar,"active")},1e3)}:(this._showScrollbar=t,this.scrollbar.style.opacity="1",this.scrollbar.style.visibility="visible"),this._init(),this._bindEvent()},c=n.prototype;return c._init=c.init=function(){this.sliderHeight=this.slider.offsetHeight,this.wrapperHeight=this.wrapper.offsetHeight,this.sliderMovableMaxDist=this.sliderHeight-this.wrapperHeight,this.sliderHeight=this.slider.offsetHeight<=0?1:this.slider.offsetHeight,this.scrollbarHeight=this.scrollbar.offsetHeight,this.scale=this.scrollbarHeight/this.sliderHeight,this.scale>=1?this.thumb.style.height="100%":this.thumb.style.height=this.wrapperHeight/this.sliderHeight*this.scrollbarHeight+"px",this.thumbHeight=this.thumb.offsetHeight,this.thumbMovableMaxDist=this.scrollbarHeight-this.thumbHeight,this._showScrollbar()},c.handleEvent=function(t){var e=t||window.event;switch(e.type){case"mousedown":this._startHandler(e);break;case"mousemove":this._moveHandler(e);break;case"mouseover":this._overHandler(e);break;case"mouseout":this._outHandler(e);break;case"DOMMouseScroll":case"mousewheel":this._wheelHandler(e);break;case"mouseup":case"touchcancel":this._endHandle(e)}},c._bindEvent=function(){h(this.thumb,"mousedown",this,!1),h(this.thumb,"mousemove",this,!1),h(this.thumb,"mouseup",this,!1),h(document.body,"mouseup",this,!1),h(document.body,"mousemove",this,!1),h(this.scrollbar,"mouseover",this,!1),h(this.scrollbar,"mouseout",this,!1),a?h(this.wrapper,"mousewheel",this,!1):h(this.wrapper,"DOMMouseScroll",this,!1)},c.destroy=function(){o(this.thumb,"mousedown",this),o(this.thumb,"mousemove",this),o(this.thumb,"mouseup",this),o(document.body,"mouseup",this),o(document.body,"mousemove",this),o(this.scrollbar,"mouseover",this),o(this.scrollbar,"mouseout",this),a?o(this.wrapper,"mousewheel",this):o(this.wrapper,"DOMMouseScroll",this)},c._startHandler=function(t){t.stopPropagation(),this.onMoving=!0,this.startY=t.pageY},c._moveHandler=function(t){if(t.stopPropagation(),!(this.scale>=1)){if(!this.onMoving)return!1;this.moveY=t.pageY-this.startY,this.moveY+=this.moveYLasttime,this.moveY=this.moveY<0?0:this.moveY>this.thumbMovableMaxDist?this.thumbMovableMaxDist:this.moveY,this.thumb.style[r]="translate3d(0, "+this.moveY+"px, 0)",this.wheelY=-(this.moveY/this.scale),this.slider.style[r]="translate3d(0, "+this.wheelY+"px, 0)",this._showScrollbar()}},c._endHandle=function(t){t.stopPropagation(),this.moveYLasttime=this.moveY,this.onMoving=!1},c._overHandler=function(t){window.clearTimeout(this.timeout),s(this.scrollbar,"active")},c._outHandler=function(t){this._showScrollbar()},c._processWheelData=function(t){var e;return e=Math.abs(t)>=120?t/120:-t,e*this.preWheelPixels},c._wheelHandler=function(t){if(t.preventDefault(),!(this.scale>=1)){var e=a>0?t.wheelDelta:t.detail;this.wheelY+=this._processWheelData(e),this.wheelY=-this.wheelY<=0?0:-this.wheelY>=this.sliderMovableMaxDist?-this.sliderMovableMaxDist:this.wheelY,this.slider.style[r]="translate3d(0, "+this.wheelY+"px, 0)",this.moveYLasttime=-(this.wheelY*this.scale),this.thumb.style[r]="translate3d(0, "+this.moveYLasttime+"px, 0)",this._showScrollbar()}},c.scrollTo=function(t){this.wheelY=-t,this.wheelY=-this.wheelY<=0?0:-this.wheelY>=this.sliderMovableMaxDist?-this.sliderMovableMaxDist:this.wheelY,this.slider.style[r]="translate3d(0, "+this.wheelY+"px, 0)",this.moveYLasttime=-(this.wheelY*this.scale),this.thumb.style[r]="translate3d(0, "+this.moveYLasttime+"px, 0)",this._showScrollbar()},c.scrollToBottom=function(){this.scrollTo(this.sliderMovableMaxDist)},c.scrollToTop=function(){this.scrollTo(0)},n});