!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.Lscroll=e():t.Lscroll=e()}(this,function(){return function(t){function e(i){if(s[i])return s[i].exports;var o=s[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var s={};return e.m=t,e.c=s,e.d=function(t,s,i){e.o(t,s)||Object.defineProperty(t,s,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var s=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(s,"a",s),s},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=0)}([function(t,e){function s(){}function i(t,e){return t.className.match(new RegExp("(\\s|^)("+e+")(\\s|$)"))}function o(t,e){i(t,e)||(t.className+=" "+e)}function h(t,e){if(i(t,e)){var s=t.className.split(/\s+/);s.splice(s.indexOf(e),1),t.className=s.join(" ")}}function r(t,e,s,i){t.addEventListener(e,s,i)}function l(t,e,s){t.removeEventListener(e,s)}function n(t){function e(t){return"string"==typeof t?document.querySelector(t):t&&1===t.nodeType?t:void 0}if(this.wrapper=e(t.wrapper),this.slider=e(t.slider),this.scrollbar=e(t.scrollbar),this.hasbar=!0,!this.wrapper)throw new Error("No wrapper");if(this.scrollbar||(this.hasbar=!1),this.hasbar&&(this.thumb=this.scrollbar.firstElementChild),!this.slider)throw new Error("No slider");this.opts={plugins:[]},this.preWheelPixels=t.preWheelPixels||20,t.plugins&&("string"==typeof t.plugins?this.opts.plugins.push(t.plugins):"[object Array]"==Object.prototype.toString.call(t.plugins)&&(this.opts.plugins=t.plugins)),this.onMoving=!1,this.startY=0,this.moveY=0,this.moveYLasttime=0,this.wheelY=0,this.timeout=null,this.wrapperHeight=this.wrapper.offsetHeight,this.scrollbarHide=!!t.scrollbarHide,this.scrollbarHide?this._showScrollbar=function(){window.clearTimeout(this.timeout),o(this.scrollbar,"active");var t=this;this.timeout=setTimeout(function(){h(t.scrollbar,"active")},1e3)}:(this._showScrollbar=s,this.scrollbar.style.opacity="1",this.scrollbar.style.visibility="visible"),this._setting(),this._initPlugins(),this._init(),this._bindEvent()}var a=null;!function(){var t=document.createElement("fakeElement");[["WebkitTransform","webkitTransform","webkit"],["transform","Transform",null],["MozTransform","transform","moz"],["OTransform","oTransform","o"]].some(function(e){if(void 0!==t.style[e[0]])return a=e[1],!0})}();var u=window.navigator.userAgent,c=u.indexOf("Firefox")>-1?0:1;n.plugins={},n.regPlugin=function(t,e){n.plugins[t]=n.plugins[t]||e};var p=n.prototype;p._setting=function(){this.events=["scroll","pluginInitialized"]},p._init=p.init=function(){this.sliderHeight=this.slider.offsetHeight,this.wrapperHeight=this.wrapper.offsetHeight,this.sliderMovableMaxDist=this.sliderHeight-this.wrapperHeight,this.sliderHeight=this.slider.offsetHeight<=0?1:this.slider.offsetHeight,this.hasbar&&(this.scrollbarHeight=this.scrollbar.offsetHeight,this.scale=this.scrollbarHeight/this.sliderHeight,this.scale>=1?this.thumb.style.height="100%":this.thumb.style.height=this.wrapperHeight/this.sliderHeight*this.scrollbarHeight+"px",this.thumbHeight=this.thumb.offsetHeight,this.thumbMovableMaxDist=this.scrollbarHeight-this.thumbHeight,this._showScrollbar())},p._regPlugin=function(t){var e=n.plugins,s=e[t];e.hasOwnProperty(t)&&"function"==typeof s&&s.apply(this,arguments)},p._initPlugins=function(){var t=this;this.opts.plugins.forEach(function(e){t._regPlugin(e)}),this.fire("pluginInitialized")},p.on=function(t,e){this.events.indexOf(t)<0||"function"!=typeof e||(this.events[t]||(this.events[t]=[]),this.events[t].push(e))},p.off=function(){var t=(arguments.length,arguments[0]),e=arguments[1];if("string"==typeof t&&this.events[t]){var s=this.events[t];e&&"function"==typeof e?s.splice(s.indexOf(e),1):s.length=0}},p.fire=function(t){if(!(this.events.indexOf(t)<0)&&this.events[t]){var e=this.events[t].length,s=Array.prototype.slice.call(arguments);s.unshift();for(var i=0;i<e;i++)this.events[t][i].apply&&this.events[t][i].apply(this,s)}},p.handleEvent=function(t){var e=t||window.event;switch(e.type){case"mousedown":this._startHandler(e);break;case"mousemove":this._moveHandler(e);break;case"mouseover":this._overHandler(e);break;case"mouseout":this._outHandler(e);break;case"DOMMouseScroll":case"mousewheel":this._wheelHandler(e);break;case"mouseup":case"touchcancel":this._endHandle(e)}},p._bindEvent=function(){r(document.body,"mouseup",this,!1),r(document.body,"mousemove",this,!1),c?r(this.wrapper,"mousewheel",this,!1):r(this.wrapper,"DOMMouseScroll",this,!1),this.hasbar&&(r(this.thumb,"mousedown",this,!1),r(this.thumb,"mousemove",this,!1),r(this.thumb,"mouseup",this,!1),r(this.scrollbar,"mouseover",this,!1),r(this.scrollbar,"mouseout",this,!1))},p.destroy=function(){l(this.thumb,"mousedown",this),l(this.thumb,"mousemove",this),l(this.thumb,"mouseup",this),l(document.body,"mouseup",this),l(document.body,"mousemove",this),l(this.scrollbar,"mouseover",this),l(this.scrollbar,"mouseout",this),c?l(this.wrapper,"mousewheel",this):l(this.wrapper,"DOMMouseScroll",this)},p._startHandler=function(t){t.stopPropagation(),this.onMoving=!0,this.startY=t.pageY},p._moveHandler=function(t){if(t.stopPropagation(),this.hasbar&&!(this.scale>=1)){if(!this.onMoving)return!1;this.moveY=t.pageY-this.startY,this.moveY+=this.moveYLasttime,this.moveY=this.moveY<0?0:this.moveY>this.thumbMovableMaxDist?this.thumbMovableMaxDist:this.moveY,this.thumb.style[a]="translate3d(0, "+this.moveY+"px, 0)",this.wheelY=-this.moveY/this.scale,this.slider.style[a]="translate3d(0, "+this.wheelY+"px, 0)",this._showScrollbar(),this.fire("scroll")}},p._endHandle=function(t){t.stopPropagation(),this.moveYLasttime=this.moveY,this.onMoving=!1},p._overHandler=function(t){window.clearTimeout(this.timeout),o(this.scrollbar,"active")},p._outHandler=function(t){this._showScrollbar()},p._processWheelData=function(t){return(Math.abs(t)>=120?t/120:-t)*this.preWheelPixels},p._wheelHandler=function(t){if(t.preventDefault(),!(this.scale>=1)){var e=c>0?t.wheelDelta:t.detail;this.wheelY+=this._processWheelData(e),this.wheelY=-this.wheelY<=0?0:-this.wheelY>=this.sliderMovableMaxDist?-this.sliderMovableMaxDist:this.wheelY,this.slider.style[a]="translate3d(0, "+this.wheelY+"px, 0)",this.hasbar&&(this.moveYLasttime=-this.wheelY*this.scale,this.thumb.style[a]="translate3d(0, "+this.moveYLasttime+"px, 0)",this._showScrollbar()),this.fire("scroll")}},p.scrollTo=function(t){this.wheelY=-t,this.wheelY=-this.wheelY<=0?0:-this.wheelY>=this.sliderMovableMaxDist?-this.sliderMovableMaxDist:this.wheelY,this.slider.style[a]="translate3d(0, "+this.wheelY+"px, 0)",this.moveYLasttime=-this.wheelY*this.scale,this.thumb.style[a]="translate3d(0, "+this.moveYLasttime+"px, 0)",this._showScrollbar()},p.scrollToBottom=function(){this.scrollTo(this.sliderMovableMaxDist)},p.scrollToTop=function(){this.scrollTo(0)},t.exports=n}])});